<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Operation Problem Structure · PowerSimulations.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="PowerSimulations.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">PowerSimulations.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Welcome Page</a></li><li><a class="tocitem" href="../../quick_start_guide/">Quick Start Guide</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/decision_problem/">Single-step Problem</a></li><li><a class="tocitem" href="../../tutorials/pcm_simulation/">Multi-stage Production Cost Simulation</a></li></ul></li><li><span class="tocitem">Modeler Guide</span><ul><li><a class="tocitem" href="../../modeler_guide/definitions/">Definitions</a></li><li><a class="tocitem" href="../../modeler_guide/psi_structure/">PowerSimulations.jl Modeling Structure</a></li><li><a class="tocitem" href="../../modeler_guide/problem_templates/">Operations <code>ProblemTemplate</code>s</a></li><li><a class="tocitem" href="../../modeler_guide/running_a_simulation/">Simulation</a></li><li><a class="tocitem" href="../../modeler_guide/read_results/">Read results</a></li><li><a class="tocitem" href="../../modeler_guide/simulation_recorder/">Simulation Recorder</a></li><li><a class="tocitem" href="../../modeler_guide/logging/">Logging</a></li><li><a class="tocitem" href="../../modeler_guide/debugging_infeasible_models/">Debugging infeasible models</a></li><li><a class="tocitem" href="../../modeler_guide/parallel_simulations/">Parallel Simulations</a></li><li><a class="tocitem" href="../../modeler_guide/modeling_faq/">Modeling FAQ</a></li></ul></li><li><span class="tocitem">Model Developer Guide</span><ul><li class="is-active"><a class="tocitem" href>Operation Problem Structure</a><ul class="internal"><li><a class="tocitem" href="#Registering-a-variable-in-the-model"><span>Registering a variable in the model</span></a></li></ul></li><li><a class="tocitem" href="../troubleshooting/">Troubleshooting</a></li></ul></li><li><span class="tocitem">Code Base Developer Guide</span><ul><li><a class="tocitem" href="../../code_base_developer_guide/developer/">Developer Guide</a></li><li><a class="tocitem" href="../../code_base_developer_guide/troubleshooting/">Troubleshooting</a></li></ul></li><li><span class="tocitem">Formulation Library</span><ul><li><a class="tocitem" href="../../formulation_library/Introduction/">Introduction</a></li><li><a class="tocitem" href="../../formulation_library/General/">General</a></li><li><a class="tocitem" href="../../formulation_library/Network/">Network</a></li><li><a class="tocitem" href="../../formulation_library/ThermalGen/">Thermal Generation</a></li><li><a class="tocitem" href="../../formulation_library/RenewableGen/">Renewable Generation</a></li><li><a class="tocitem" href="../../formulation_library/Load/">Load</a></li><li><a class="tocitem" href="../../formulation_library/Branch/">Branch</a></li><li><a class="tocitem" href="../../formulation_library/Service/">Services</a></li><li><a class="tocitem" href="../../formulation_library/Feedforward/">Feedforwards</a></li><li><a class="tocitem" href="../../formulation_library/Piecewise/">Piecewise Linear Cost</a></li></ul></li><li><a class="tocitem" href="../../api/PowerSimulations/">API Reference</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Model Developer Guide</a></li><li class="is-active"><a href>Operation Problem Structure</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Operation Problem Structure</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/NREL-Sienna/PowerSimulations.jl/blob/main/docs/src/model_developer_guide/structure_of_operation_problem.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Structure-of-an-operations-problem-model"><a class="docs-heading-anchor" href="#Structure-of-an-operations-problem-model">Structure of an operations problem model</a><a id="Structure-of-an-operations-problem-model-1"></a><a class="docs-heading-anchor-permalink" href="#Structure-of-an-operations-problem-model" title="Permalink"></a></h1><p>In most cases operation problem models are optimization models. Although in <code>PowerSimulations.jl</code> it is possible to define arbitrary problems that can reflect heuristic decision rules, this is not the common case. This page focuses on explaining the structure of operations problems that employ an optimization problem and solver.</p><p>The first aspect to consider when thinking about developing a model compatible with <code>PowerSimulations.jl</code> is that although we support all of <code>JuMP.jl</code> objects, you need to employ <a href="https://jump.dev/JuMP.jl/stable/manual/variables/#anonymous_variables">anonymous constraints and variables in JuMP</a> and register the constraints, variables and other optimization objects into PowerSimulations.jl&#39;s optimization container. Otherwise the features to use your problem in the simulation like the coordination with other problems and post processing won&#39;t work.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>The requirements for the simulation of Power Systems operations are more strict than solving an optimization problem once with just <code>JuMP.jl</code>. The requirements imposed by <code>PowerSimulations.jl</code> to integrate your models in a simulation are designed to help with other complex operations that go beyond <code>JuMP.jl</code> scope.</p></div></div><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>All the code in this page is considered &quot;pseudo-code&quot;. Copy-paste will likely not work out of the box. You need to develop the internals of the functions correctly for the examples below to work.</p></div></div><h2 id="Registering-a-variable-in-the-model"><a class="docs-heading-anchor" href="#Registering-a-variable-in-the-model">Registering a variable in the model</a><a id="Registering-a-variable-in-the-model-1"></a><a class="docs-heading-anchor-permalink" href="#Registering-a-variable-in-the-model" title="Permalink"></a></h2><p>To register a variable in the model, the developer must first allocate the container into the optimization container and then populate it. For example, it require start the build function as follows:</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>We recommend calling <code>import PowerSimulations</code> and defining the constant <code>CONST PSI = PowerSimulations</code> to make it easier to read the code and determine which package is responsible for defining the functions.</p></div></div><pre><code class="language-julia hljs">    function PSI.build_model!(model::PSI.DecisionModel{MyCustomModel})
        container = PSI.get_optimization_container(model)
        PSI.set_time_steps!(container, 1:24)

        # Create the container for the variable
        variable = PSI.add_variable_container!(
            container,
            PSI.ActivePowerVariable(), # &lt;- This variable is defined in PowerSimulations but the user can define their own
            PSY.ThermalGeneration, # &lt;- Device type for the variable. Can be from PSY or custom defined
            devices_names, # &lt;- First container dimension
            time_steps, # &lt;- Second container dimension
        )

        # Iterate over the devices and time to store the JuMP variables into the container.
        for t in time_steps, d in devices
            name = PSY.get_name(d)
            variable[name, t] = JuMP.@variable(get_jump_model(container))
            # It is possible to use PSY getter functions to retrieve data from the generators
            # Any other variable property can be specified inside this loop.
            JuMP.set_upper_bound(variable[name, t], UB_DATA) # &lt;- Optional
            JuMP.set_lower_bound(variable[name, t], LB_DATA) # &lt;- Optional
        end

    return
    end</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../modeler_guide/modeling_faq/">« Modeling FAQ</a><a class="docs-footer-nextpage" href="../troubleshooting/">Troubleshooting »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Sunday 14 July 2024 20:15">Sunday 14 July 2024</span>. Using Julia version 1.10.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
